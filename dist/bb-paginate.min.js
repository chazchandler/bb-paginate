/*! bb-paginate v1.0.0 2013-11-22 */
(function(){var a;a=angular.module("bbPaginate",[])}).call(this),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=angular.module("bbPaginate"),b.factory("Page",function(){var a;return a=function(){function a(a){this.reset=c(this.reset,this),angular.extend(this,a)}return a.prototype.disabled=!1,a.prototype.active=!1,a.prototype.text="",a.prototype.number=null,a.prototype.reset=function(a){return this.number?this.active=a===this.number:void 0},a.prototype.listItemClasses=function(){var a;return a=[],this.active&&a.push("active"),this.disabled&&a.push("disabled"),this.cssClass&&a.push(this.cssClass),a.join(" ")},a}()}),b.factory("PrevPage",["Page",function(a){var b,d;return b=function(a){function b(){return this.reset=c(this.reset,this),d=b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.cssClass="previous-page",b.prototype.text="<",b.prototype.reset=function(a){return this.number=a-1,this.disabled=1===a},b}(a)}]),b.factory("EllipsisPage",["Page",function(a){var b,c;return b=function(a){function b(){return c=b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.cssClass="ellipsis",b.prototype.disabled=!0,b.prototype.text=". . .",b.prototype.reset=function(){return null},b}(a)}]),b.factory("NextPage",["Page",function(a){var b,d;return b=function(a){function b(){return this.reset=c(this.reset,this),d=b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.cssClass="next-page",b.prototype.text=">",b.prototype.reset=function(a,b){return this.number=a+1,this.disabled=a===b},b}(a)}]),b.factory("Paginator",function(){var a;return a=function(){function a(a){if(this.pagination=a,this.numPages=c(this.numPages,this),this.buildPages=c(this.buildPages,this),this.reset=c(this.reset,this),this.isValid=c(this.isValid,this),!this.isValid())throw"Invalid Pagination. Must have attributes current_page, per_page, and total_entries"}return a.prototype.pages=[],a.prototype.isValid=function(){var a=this;return _.all(["current_page","per_page","total_entries"],function(b){return void 0!==a.pagination[b]})},a.prototype.reset=function(){var a=this;return this.pages=[],this.buildPages(),_.each(this.pages,function(b){return b.reset(parseInt(a.pagination.current_page),a.numPages())})},a.prototype.buildPages=function(){throw"#buildPages must be implemented in subclass"},a.prototype.numPages=function(){return Math.ceil(this.pagination.total_entries/this.pagination.per_page)},a}()}),a=function(){function a(a,b){this.scope=a,this.attrs=b,this.onPageSelect=c(this.onPageSelect,this),this.selectPage=c(this.selectPage,this),this.scope.selectPage=this.selectPage,this._pageSelectHandlers=[]}return a.prototype.selectPage=function(a){if(!a.disabled)return this.scope.pagination.current_page=a.number,this.scope.onPageSelect({pageNumber:a.number}),_(this._pageSelectHandlers).each(function(b){return b(a.number)})},a.prototype.onPageSelect=function(a){return this._pageSelectHandlers.push(a)},a}(),b.directive("bbPaginate",["$injector",function(b){return{template:'<ul>\n  <li ng-repeat="page in paginator.pages" ng-class="page.listItemClasses()">\n    <a href="" ng-click="selectPage(page)">{{page.text}}</a>\n  </li>\n</ul>',controller:["$scope","$attrs",a],scope:{onPageSelect:"&",pagination:"=bbPaginate"},link:function(a,c,d){var e,f;return f=d.paginator||"StandardPaginator",e=b.get(f),a.paginator=new e(a.pagination),c.hasClass("pagination")||c.addClass("pagination"),a.$watch("pagination",a.paginator.reset,!0)}}}]),b.directive("bbPaginateScrollTo",function(){return{require:"bbPaginate",link:function(a,b,c,d){return d.onPageSelect(function(){return $.scrollTo(c.bbPaginateScrollTo,500)})}}})}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=angular.module("bbPaginate"),a.factory("StandardPaginator",["Paginator","Page","PrevPage","NextPage","EllipsisPage",function(a,c,e,f,g){var h,i;return h=function(a){function h(){return this.rightWindow=b(this.rightWindow,this),this.centerWindow=b(this.centerWindow,this),this.leftWindow=b(this.leftWindow,this),this.addFillerPage=b(this.addFillerPage,this),this.addNumericalPages=b(this.addNumericalPages,this),this.addLastPage=b(this.addLastPage,this),this.buildWindow=b(this.buildWindow,this),this.buildPages=b(this.buildPages,this),this.isLeftWindow=b(this.isLeftWindow,this),this.isCenterWindow=b(this.isCenterWindow,this),this.showPreviousPage=b(this.showPreviousPage,this),this.showNextPage=b(this.showNextPage,this),i=h.__super__.constructor.apply(this,arguments)}return d(h,a),h.prototype.windowSize={right:5,left:5,center:2},h.prototype.showNextPage=function(){return!0},h.prototype.showPreviousPage=function(){return!0},h.prototype.isCenterWindow=function(){return this.pagination.current_page<this.numPages()-(this.windowSize.right-2)},h.prototype.isLeftWindow=function(){return this.pagination.current_page<=this.windowSize.left-1||this.numPages()<=this.windowSize.left},h.prototype.buildPages=function(){return this.showPreviousPage()&&this.pages.push(new e),this.buildWindow(),this.showNextPage()?this.pages.push(new f):void 0},h.prototype.buildWindow=function(){return this.isLeftWindow()?this.leftWindow():this.isCenterWindow()?this.centerWindow():this.rightWindow()},h.prototype.addLastPage=function(){return this.pages.push(new c({text:this.numPages(),number:this.numPages()}))},h.prototype.addNumericalPages=function(a){var b,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)b=a[d],f.push(this.pages.push(new c({text:b,number:parseInt(b)})));return f},h.prototype.addFillerPage=function(){return this.pages.push(new g)},h.prototype.leftWindow=function(){var a,b;return a=this.numPages()<this.windowSize.left?this.numPages():this.windowSize.left,this.addNumericalPages(function(){b=[];for(var c=1;a>=1?a>=c:c>=a;a>=1?c++:c--)b.push(c);return b}.apply(this)),this.numPages()<=this.windowSize.left||this.addFillerPage(),this.numPages()<=this.windowSize.left?void 0:this.addLastPage()},h.prototype.centerWindow=function(){var a,b;return this.pages.push(new c({text:"1",number:1})),this.addFillerPage(),this.addNumericalPages(function(){b=[];for(var c=a=this.pagination.current_page-this.windowSize.center,d=this.pagination.current_page+this.windowSize.center;d>=a?d>=c:c>=d;d>=a?c++:c--)b.push(c);return b}.apply(this)),this.addFillerPage(),this.addLastPage()},h.prototype.rightWindow=function(){var a,b;return this.pages.push(new c({text:"1",number:1})),this.addFillerPage(),this.addNumericalPages(function(){b=[];for(var c=a=this.numPages()-(this.windowSize.right-1),d=this.numPages();d>=a?d>=c:c>=d;d>=a?c++:c--)b.push(c);return b}.apply(this))},h}(a)}])}.call(this);